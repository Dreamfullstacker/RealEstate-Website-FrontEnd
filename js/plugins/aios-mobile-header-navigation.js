!function(i){i.prototype.aiosMobileHeaderNavigation=function(a){a=i.extend({trigger:".aios-mobile-pack-navigation-trigger",attachment:".aios-mobile-pack-header-buttons",position:"bottom"},a),this.each(function(t,o){!function(a,t){var o=a,e=i(t.trigger),s=i(t.attachment),n=i("<div class='aiosMobileHeaderOverlay'></div>");function l(){e.click(c),o.find("a").click(function(a){a.preventDefault();var o=i(a.currentTarget),e=o.parent(),s=e.find(".sub-menu").length;if(e.hasClass("open")||!s){var n=o.attr("href"),l=void 0===o.attr("target")?"_self":o.attr("target");window.open(n,l)}"bottom"==t.position&&setTimeout(g,500)}),o.find("li").click(function(a){var t=i(a.currentTarget);t.siblings().removeClass("open"),t.siblings().find("li").removeClass("open"),t.siblings().find(".sub-menu").hide(),t.hasClass("open")||(t.toggleClass("open"),t.children(".sub-menu").show())}),"ontouchstart"in window||navigator.msMaxTouchPoints?(n[0].addEventListener("touchstart",function(){n.is(":visible")&&c("close")},!1),n[0].addEventListener("click",function(){n.is(":visible")&&c("close")},!1)):n[0].addEventListener("click",function(){c("close")},!1),"bottom"==t.position&&(i(window).on("load",g),i(window).on("resize",g),window.addEventListener("orientationchange",g))}function c(i){switch(t.position){case"left":o.hasClass("aios-mobile-pack-navigation-visible")||"close"==i?(o.stop(!0).animate({left:"-100%"},750),n.stop(!0).animate({opacity:0},750,"swing",function(){n.css({display:"none"})}),o.removeClass("aios-mobile-pack-navigation-visible"),e.removeClass("aios-mobile-pack-navigation-trigger-active")):(o.stop(!0).animate({left:0},750),n.css({display:"block"}),n.stop(!0).animate({opacity:.5},750),o.addClass("aios-mobile-pack-navigation-visible"),e.addClass("aios-mobile-pack-navigation-trigger-active"));break;case"right":o.hasClass("aios-mobile-pack-navigation-visible")||"close"==i?(o.stop(!0).animate({right:"-240px"},750),n.stop(!0).animate({opacity:0},750,"swing",function(){n.css({display:"none"})}),o.removeClass("aios-mobile-pack-navigation-visible"),e.removeClass("aios-mobile-pack-navigation-trigger-active")):(o.stop(!0).animate({right:0},750),n.css({display:"block"}),n.stop(!0).animate({opacity:.5},750),o.addClass("aios-mobile-pack-navigation-visible"),e.addClass("aios-mobile-pack-navigation-trigger-active"));break;default:o.slideToggle(400,function(){g()}),o.toggleClass("aios-mobile-pack-navigation-visible"),e.toggleClass("aios-mobile-pack-navigation-trigger-active")}}function g(){var a,e=window.innerHeight||i(window).height(),n=e-s.height();o.css({height:"auto",paddingBottom:0});var l=o.height()+i(".amh-header-buttons").height();l<n?(a={height:"auto",paddingBottom:0},o.css(a)):(a={height:n},"bottom"==t.position&&(a.paddingBottom=100),o.css(a))}(function(){switch(n.css({left:0,top:0,width:"100%",height:"100%",position:"fixed","z-index":"999",background:"#000",display:"none",opacity:.5}),t.position){case"left":o.css({left:"-100%",display:"block","z-index":"1000",top:0,height:"100%",position:"fixed",width:240}),o.addClass("aios-mobile-pack-navigation-left"),o.after(n);break;case"right":o.css({right:"-240px",display:"block","z-index":"1000",top:0,height:"100%",position:"fixed",width:240}),o.addClass("aios-mobile-pack-navigation-right"),o.after(n);break;default:o.addClass("aios-mobile-pack-navigation-bottom")}})(),l()}(i(o),a)})}}(jQuery);
